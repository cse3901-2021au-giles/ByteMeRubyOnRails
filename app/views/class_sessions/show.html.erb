<h1><%= @class_session.name %></h1>

<div class="class display">
  <h2>Professor</h2>
  <% user_class_x_refs = UserClassXRef.where(class_id: @class_session.id) %>
  <%# Struggling to get the professor name here %>

  <h2>Groups</h2>
  <% groups = Group.where(class_id: @class_session.id) %>
  <% groups.each do |group| %>
    <button type="button" class="collapsible"><%= group.name =%></button>
    <div class="content">
      <% members = UserGroupXRef.where(group_id: group.id) %>
      <ul>
        <% members.each do |member| %>
          <li> <%= member.name =%> </li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <h2>Students</h2>
  <% users = UserClassXRef.where(class_id: @class_session.id) %>
  <% users.each do |user| %>
    <% if user.student? %>
      <%= link_to user.first_name + " " + user.last_name, user %>
    <% end %>
    <% if current_user.admin? && !current_user?(user) %>
        <%= link_to "delete", user, method: :delete, data: { confirm: "You sure?" } %>
    <% end %>
  <% end %>
  
</div>